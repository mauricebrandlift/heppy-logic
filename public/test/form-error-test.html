<!DOCTYPE html>
<html>
<head>
    <title>Form Error Handling Test</title>
    <style>
        /* Test styling for error elements */
        .hide {
            display: none !important;
        }
        
        [data-error-for] {
            color: red;
            font-size: 0.8em;
            margin-top: 4px;
        }
        
        .form-field-wrapper {
            margin-bottom: 15px;
        }
        
        .form-field-wrapper.has-error input {
            border-color: red;
        }
        
        .error-test-button {
            margin: 5px;
            padding: 5px 10px;
        }
    </style>
</head>
<body>
    <h1>Form Error Handling Test</h1>
    
    <div class="test-container">
        <h2>Error Display Testing</h2>
        <form data-form-name="test-form">
            <div class="form-field-wrapper">
                <label for="test-field">Test Input:</label>
                <input type="text" id="test-field" data-field-name="testField">
                <div data-error-for="testField" class="hide">Error message for field</div>
            </div>
            
            <div data-error-for="global" class="hide">Global error message</div>
            
            <div class="test-buttons">
                <button type="button" class="error-test-button" id="show-field-error">Show Field Error</button>
                <button type="button" class="error-test-button" id="hide-field-error">Hide Field Error</button>
                <button type="button" class="error-test-button" id="show-global-error">Show Global Error</button>
                <button type="button" class="error-test-button" id="hide-global-error">Hide Global Error</button>
            </div>
        </form>
    </div>
    
    <script type="module">
        import { showError, hideError, isErrorVisible } from '../forms/ui/formUi.js';
        
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.querySelector('[data-form-name="test-form"]');
            const fieldErrorEl = form.querySelector('[data-error-for="testField"]');
            const globalErrorEl = form.querySelector('[data-error-for="global"]');
            const inputWrapper = form.querySelector('.form-field-wrapper');
            
            // Field error buttons
            document.getElementById('show-field-error').addEventListener('click', () => {
                showError(fieldErrorEl, "This is a test field error");
                inputWrapper.classList.add('has-error');
                console.log('Field error visible:', isErrorVisible(fieldErrorEl));
            });
            
            document.getElementById('hide-field-error').addEventListener('click', () => {
                hideError(fieldErrorEl);
                inputWrapper.classList.remove('has-error');
                console.log('Field error visible:', isErrorVisible(fieldErrorEl));
            });
            
            // Global error buttons
            document.getElementById('show-global-error').addEventListener('click', () => {
                showError(globalErrorEl, "This is a test global error");
                console.log('Global error visible:', isErrorVisible(globalErrorEl));
            });
            
            document.getElementById('hide-global-error').addEventListener('click', () => {
                hideError(globalErrorEl);
                console.log('Global error visible:', isErrorVisible(globalErrorEl));
            });
        });
    </script>
</body>
</html>
